<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project 1</title>
</head>
<body>
  <h1>Main Project</h1>
  <div id="main-project"></div>

  <h2>Other Projects</h2>
  <div id="other-projects"></div>

  <h2>Contact Form</h2>
  <form id="contact-form">
    <input type="text" id="name" name="name" placeholder="Your name" required><br>
    <input type="email" id="email" name="email" placeholder="Your email" required><br>
    <textarea id="message" name="message" placeholder="Message" required></textarea><br>
    <button type="submit">Submit</button>
  </form>

  <script>
    window.addEventListener('load', () => {
      const apiUrl = 'https://raw.githubusercontent.com/ironhack-jc/mid-term-api/main/projects'; 

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          const projects = data.slice(0, 3);

          const mainProject = projects.find(p => p.uuid === "1");
          if (!mainProject) {
            alert("Main project with uuid 1 not found.");
            return;
          }

            document.getElementById("main-project").innerHTML = `
            <h3>${mainProject.name}</h3>
            <p>${mainProject.description}</p>
            <p>${mainProject.content}</p>
            <img src="${mainProject.image}" alt="Project Image" width="200">
            <p>Completed on: ${mainProject.completed_on}</p>
          `;

          
          const others = data.filter(p => p.uuid !== "1");
          if (others.length < 3) {
            alert("Not enough other projects to display.");
            return;
          }

          const shuffled = others.sort(() => 0.5 - Math.random());
          const selected = shuffled.slice(0, 3);
          const otherContainer = document.getElementById("other-projects");
          selected.forEach(project => {
            const div = document.createElement("div");
            div.innerHTML = `
              <h4>${project.name}</h4>
              <p>${project.description}</p>
              <img src="${project.image}" alt="Other Project Image" width="150">
            `;
            otherContainer.appendChild(div);
          });
        })
        .catch(error => {
          console.error('API error:', error);
          alert("Failed to load projects.");
        });

      
      document.getElementById("contact-form").addEventListener("submit", function(e) {
        e.preventDefault();
        const name = document.getElementById("name").value.trim().toLowerCase();
        const email = document.getElementById("email").value.trim();

        if (name === "ironhack") {
          alert("You cannot be Ironhack, because I am Ironhack.");
          return;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert("Please enter a valid email.");
          return;
        }

        alert("Form submitted successfully!");
        });
    });
  </script>
</body>
</html>